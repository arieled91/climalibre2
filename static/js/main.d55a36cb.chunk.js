(this.webpackJsonpclimalibre2=this.webpackJsonpclimalibre2||[]).push([[0],{16:function(e,t,a){e.exports={container:"BackgroundImage_container__2bOs5",image:"BackgroundImage_image__2mgB4",thumb:"BackgroundImage_thumb__1IYvo",hidden:"BackgroundImage_hidden__3fwe7"}},25:function(e,t,a){e.exports={content:"TodayForecast_content__IQ3kG",firstRow:"TodayForecast_firstRow__GoWvS",container:"TodayForecast_container__GjUuR",forecastTitle:"TodayForecast_forecastTitle__1cDHQ",extraShadow:"TodayForecast_extraShadow__2WK2-",temp:"TodayForecast_temp__16rp-"}},38:function(e,t,a){e.exports={container:"WeatherIcon_container__3C6nD"}},39:function(e,t,a){e.exports={container:"Weather_container__2Hl-s"}},49:function(e,t,a){},50:function(e,t,a){},6:function(e,t,a){e.exports={container:"WeatherDetail_container__1IxEv",weatherComponent:"WeatherDetail_weatherComponent__1Kb1W",description:"WeatherDetail_description__kanKJ",hideScrollbar:"WeatherDetail_hideScrollbar__2YBJh",date:"WeatherDetail_date__CT4FV",forecast:"WeatherDetail_forecast__3JO7V",currentWeather:"WeatherDetail_currentWeather__3R0sj",item:"WeatherDetail_item__3-wi2",address:"WeatherDetail_address__Z3P-l",mainComponent:"WeatherDetail_mainComponent__3XVnn",temp:"WeatherDetail_temp__26JdA",bg:"WeatherDetail_bg__1sNNk"}},80:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),i=a.n(r),c=a(17),s=a.n(c),o=(a(49),a(50),a(11)),u=a.n(o),l=a(15),d=a(7),h=a(100),m=a(99),p=a(26),f=a.n(p),j=new f.a({en:{locale:"en",loading:"Loading...",humidity:"Humidity",feelsLike:"Feels Like",wind:"Wind",important:"Important!",geolocationRequest:"Grant location permission in your device to continue",geolocationDisabled:"Geolocation is disabled in your device",north:"North",northEast:"Northeast",east:"East",southEast:"Southeast",south:"South",southWest:"Southwest",west:"West",northwest:"Northwest",station:"Station",noPrecipitations:"No precipitations expected",precipitations:function(e,t){return"Expected ".concat(e," at ").concat(t)}},es:{locale:"es",loading:"Cargando...",humidity:"Humedad",feelsLike:"Sensaci\xf3n t\xe9rmica",wind:"Viento",important:"\xa1Importante!",geolocationRequest:"Para continuar conceda permisos de ubicaci\xf3n.",geolocationDisabled:"La geolocalizaci\xf3n se encuentra deshabilitada en su dispositivo",north:"Norte",northEast:"Noreste",east:"Este",southEast:"Sudeste",south:"Sur",southWest:"Sudoeste",west:"Oeste",northwest:"Noroeste",station:"Estaci\xf3n",noPrecipitations:"No se esperan precipitaciones",precipitations:function(e,t){return"Se espera ".concat(e," a las ").concat(t)}}}),b=a(6),g=a.n(b),O=a.p+"static/media/cloudy-sky-min.d8516944.jpg",w=a.p+"static/media/drizzle-min.ad372d4a.jpg",v=(a.p,a.p+"static/media/fog-min.42e6f289.jpg"),_=a.p+"static/media/rainy-day-min.f8c28a9f.jpg",x=a.p+"static/media/snow-min.2ba5aee5.jpg",y=a.p+"static/media/storm-min.c85d9d6c.jpg",D=a.p+"static/media/sunny-min.5651a5a0.jpg",N=a.p+"static/media/covered-min.3135c1a6.jpg",E=(a.p,a.p,a.p,a.p,a.p,a.p,a.p+"static/media/cloudy-sky.dbc3ce7b.jpg"),k=a.p+"static/media/drizzle.9cdac81c.jpg",S=(a.p,a.p+"static/media/fog.9a84ff24.jpg"),R=a.p+"static/media/rainy-day.6b55c87c.jpg",W=a.p+"static/media/snow.8d5253ed.jpg",T=a.p+"static/media/storm.9648b46f.jpg",L=a.p+"static/media/sunny.f99420e2.jpg",C=a.p+"static/media/covered.3a9a56da.jpg",P=(a.p,a.p,a.p,a.p,a.p,a.p,a(16)),I=a.n(P),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(e).toFixed(t)},A=function(e){var t=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return"0"===t.charAt(0)?t.substr(1):t},F=function(e){var t=1e3*e.sys.sunrise,a=1e3*e.sys.sunset,n=(new Date).getTime();return n>t&&n<a},G=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.join(" ")},H=a(4),B=a.n(H),z=(B.a.shape({name:B.a.string,weather:B.a.array,main:B.a.object,wind:B.a.object}),B.a.shape({list:B.a.array}),function(e){var t=e.weather,a=i.a.useState({min:"",full:""}),r=Object(d.a)(a,2),c=r[0],s=r[1],o=i.a.useState(!1),u=Object(d.a)(o,2),l=u[0],h=u[1],m=i.a.useCallback((function(){return F(t)}),[t]),p=i.a.useCallback((function(){if(!t)return null;var e=t.weather[0].id;switch((""+e)[0]){case"2":return{full:T,min:y};case"3":return{full:k,min:w};case"5":return{full:R,min:_};case"6":return{full:W,min:x};case"7":return{full:S,min:v};case"8":return 800===e||801===e?{full:L,min:D}:802===e||803===e?{full:E,min:O}:{full:C,min:N};default:return{full:E,min:O}}}),[m,t]);return i.a.useEffect((function(){s(p())}),[p,t]),Object(n.jsxs)("div",{className:I.a.container,children:[Object(n.jsx)("img",{className:G(I.a.image,I.a.thumb,l?I.a.hidden:""),src:c.min,alt:""}),Object(n.jsx)("img",{className:G(I.a.image,l?"":I.a.hidden),src:c.full,alt:"",onLoad:function(){return h(!0)}})]})}),M=a(25),q=a.n(M),J=a(12),U=a(41),V=a(37),K=a.n(V),Q=a(38),X=a.n(Q),Z=function(e){var t=e.isDayTime,a=void 0===t||t,r=e.weatherCode,c=Object(U.a)(e,["isDayTime","weatherCode"]),s=i.a.useState(null),o=Object(d.a)(s,2),u=o[0],l=o[1];return i.a.useEffect((function(){if(null!==r&&void 0!==r)switch(r.toString()[0]){case"2":case"5":case"3":l("RAIN");break;case"6":[612,613,615].includes(r)?l("SLEET"):l("SNOW");break;case"7":[771,781].includes(r)?l("WIND"):l("FOG");break;case"8":[800,801].includes(r)&&l(a?"CLEAR_DAY":"CLEAR_NIGHT"),[802,803].includes(r)&&l(a?"PARTLY_CLOUDY_DAY":"PARTLY_CLOUDY_NIGHT"),804===r&&l("CLOUDY");break;default:l("PARTLY_CLOUDY_DAY")}}),[r,a]),Object(n.jsx)("div",{className:X.a.container,children:u&&Object(n.jsx)(K.a,Object(J.a)({id:"canvas",icon:u},c))})},$=function(e){var t=e.weather,a=e.forecasts;return Object(n.jsx)("div",{className:q.a.container,children:a.map((function(e){return Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)("div",{className:q.a.content,children:[Object(n.jsxs)("div",{className:q.a.firstRow,children:[Object(n.jsx)(Z,{isDayTime:F(t),weatherCode:e.weather[0].id,size:30,color:"white"}),Object(n.jsx)("span",{className:q.a.temp,children:Object(n.jsx)("strong",{children:Y(e.main.temp)+"\xb0"})})]}),Object(n.jsx)("div",{children:Object(n.jsx)("strong",{style:{fontSize:"9pt"},children:A(1e3*e.dt)})})]})},e.dt)}))})},ee=function(e){var t=e.weather,a=e.forecast,r=i.a.useState([]),c=Object(d.a)(r,2),s=c[0],o=c[1],u=i.a.useState(null),l=Object(d.a)(u,2),h=l[0],m=l[1];i.a.useEffect((function(){if(a){var e=a.list.filter((function(e){return 1e3*e.dt<function(){var e=new Date;e.setHours(e.getHours()+24);var t,a,n=new Date;return n.setHours(7,0,0,0),n.setDate(n.getDate()+1),(t=e)<=(a=n)?t:a}()}));o(e),m(e.find((function(e){return"Rain"===e.weather[0].main})))}}),[a]);var p,f;return Object(n.jsxs)("div",{className:g.a.container,children:[Object(n.jsx)("div",{className:g.a.bg,children:Object(n.jsx)(z,{weather:t})}),Object(n.jsxs)("div",{className:G(g.a.weatherComponent,g.a.mainComponent),children:[Object(n.jsx)("div",{className:g.a.date,children:(new Date).toLocaleString(j.locale,{weekday:"long",month:"long",day:"numeric"})}),Object(n.jsxs)("div",{className:g.a.currentWeather,children:[Object(n.jsx)("div",{className:G(g.a.item,g.a.address),children:t.name}),Object(n.jsx)("div",{className:g.a.description,children:Object(n.jsx)("b",{children:t.weather[0].description})}),Object(n.jsxs)("div",{className:g.a.temp,children:[Object(n.jsx)(Z,{isDayTime:F(t),weatherCode:t.weather[0].id,color:"white"}),Y(t.main.temp)+"\xb0C"]}),Object(n.jsxs)("div",{className:g.a.item,children:[j.feelsLike,": ",Object(n.jsx)("strong",{children:Y(t.main.feels_like)+"\xba"})]}),Object(n.jsxs)("div",{className:g.a.item,children:[j.humidity,": ",Object(n.jsx)("strong",{children:Y(t.main.humidity)+"%"})]}),Object(n.jsxs)("div",{className:g.a.item,children:[j.wind,": ",Object(n.jsx)("strong",{children:Y(t.wind.speed)+" km/h "+(f=t.wind.deg,[j.north,j.northEast,j.east,j.southEast,j.south,j.southWest,j.west,j.northwest,j.north][parseFloat(f%360/45).toFixed(0)])})]}),"Rain"!==t.weather[0].main&&s.length>0&&Object(n.jsx)("div",{className:g.a.item,children:Object(n.jsx)("b",{children:h?(p=h,j.precipitations(p.weather[0].description,A(1e3*h.dt))):j.noPrecipitations})})]}),Object(n.jsx)("div",{className:G(g.a.hideScrollbar,g.a.forecast),children:Object(n.jsx)($,{weather:t,forecasts:s})})]})]})},te=a(39),ae=a.n(te),ne=a(20),re=a.n(ne),ie="https://api.openweathermap.org/data/2.5",ce=ie+"/weather",se=ie+"/forecast",oe={appid:"bb08096af050f2bd4c2b401249b14e27",units:"metric"},ue=function(){return re.a.get("https://ipapi.co/json").then((function(e){return e.data})).catch((function(e){console.log(e)}))},le=function(e,t,a){return re.a.get(ce,{params:Object(J.a)(Object(J.a)({},oe),{},{q:"".concat(e,",").concat(t),lang:a})}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},de=function(e,t,a){return re.a.get(se,{params:Object(J.a)(Object(J.a)({},oe),{},{q:"".concat(e,",").concat(t),lang:a})}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},he=function(e,t,a){return re.a.get(se,{params:Object(J.a)(Object(J.a)({},oe),{},{lat:e,lon:t,lang:a})}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},me=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var n,r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([(s=t,o=a,u=j.getLanguage(),re.a.get(ce,{params:Object(J.a)(Object(J.a)({},oe),{},{lat:s,lon:o,lang:u})}).then((function(e){return e.data})).catch((function(e){console.log(e)}))),he(t,a,j.getLanguage())]);case 2:return n=e.sent,r=Object(d.a)(n,2),i=r[0],c=r[1],e.abrupt("return",{weather:i.value,forecast:c.value});case 7:case"end":return e.stop()}var s,o,u}),e)})));return function(t,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var n,r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:if(!e.sent){e.next=11;break}return e.next=6,Promise.allSettled([le(t,a,j.getLanguage()),de(t,a,j.getLanguage())]);case 6:return n=e.sent,r=Object(d.a)(n,2),i=r[0],c=r[1],e.abrupt("return",{weather:i.value,forecast:c.value});case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),fe={EMPTY:"",PROMPT:"prompt",DENIED:"denied",GRANTED:"granted",ERROR:"error"},je=function(){var e=i.a.useState(!0),t=Object(d.a)(e,2),a=t[0],r=t[1],c=i.a.useState(null),s=Object(d.a)(c,2),o=s[0],p=s[1],f=i.a.useState(null),b=Object(d.a)(f,2),g=b[0],O=b[1],w=i.a.useState(fe.EMPTY),v=Object(d.a)(w,2),_=v[0],x=v[1];i.a.useEffect((function(){y()}),[]),i.a.useEffect((function(){E().then()}),[_]);var y=function(){try{navigator.permissions.query({name:"geolocation"}).then((function(e){x(e.state),e.onchange=function(){x(e.state)}}))}catch(e){x(fe.ERROR)}},D=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}));case 2:if(!(t=e.sent)){e.next=9;break}return e.next=6,me(t.coords.latitude,t.coords.longitude);case 6:a=e.sent,p(a.weather),O(a.forecast);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:if(!(t=e.sent)){e.next=9;break}return e.next=6,pe(t.city,t.country_code);case 6:a=e.sent,p(a.weather),O(a.forecast);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_!==fe.GRANTED){e.next=3;break}return e.next=3,D();case 3:if(_!==fe.PROMPT){e.next=8;break}return e.next=6,N();case 6:return e.next=8,D();case 8:if(_!==fe.DENIED&&_!==fe.ERROR){e.next=11;break}return e.next=11,N();case 11:_!==fe.EMPTY&&r(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){E().then()};return i.a.useEffect((function(){return window.addEventListener("focus",k),function(){window.removeEventListener("focus",k)}})),Object(n.jsxs)("div",{className:ae.a.container,children:[!o&&!a&&_===fe.DENIED&&Object(n.jsx)(h.a,{severity:"error",children:j.geolocationDisabled}),!o&&!a&&_===fe.PROMPT&&Object(n.jsxs)(h.a,{severity:"info",children:[Object(n.jsx)("strong",{children:j.important})," ".concat(j.geolocationRequest)]}),o&&Object(n.jsx)(ee,{weather:o,forecast:g}),!o&&Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center",position:"relative",top:"50%"},children:Object(n.jsx)(m.a,{})})]})},be=new f.a({en:{lang:"en",title:"Open Weather"},es:{lang:"es",title:"Clima Libre"}});var ge=function(){return Object(n.jsx)("div",{className:"app",lang:be.lang,children:Object(n.jsx)(je,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(79);s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(ge,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[80,1,2]]]);
//# sourceMappingURL=main.d55a36cb.chunk.js.map