(this.webpackJsonpclimalibre2=this.webpackJsonpclimalibre2||[]).push([[0],{15:function(e,t,a){e.exports={container:"BackgroundImage_container__1g-yv",image:"BackgroundImage_image__S0xfp",thumb:"BackgroundImage_thumb__gmPWZ",hidden:"BackgroundImage_hidden__3clwO"}},27:function(e,t,a){e.exports={forecastContent:"TodayForecast_forecastContent__36Mz9",todayForecast:"TodayForecast_todayForecast__2g0ve",forecastTitle:"TodayForecast_forecastTitle__2Rdyt",extraShadow:"TodayForecast_extraShadow__1opR1",temp:"TodayForecast_temp__1QXG7"}},40:function(e,t,a){e.exports={container:"WeatherIcon_container__1zyV6"}},41:function(e,t,a){e.exports={container:"Weather_container__2oDmk"}},51:function(e,t,a){},52:function(e,t,a){},6:function(e,t,a){e.exports={container:"WeatherComponent_container__1o1Bu",weatherComponent:"WeatherComponent_weatherComponent__3bNnQ",description:"WeatherComponent_description__1ruKu",hideScrollbar:"WeatherComponent_hideScrollbar__1CYwp",date:"WeatherComponent_date__3_z9P",forecastContainer:"WeatherComponent_forecastContainer__3z1uW",currentWeather:"WeatherComponent_currentWeather__262FJ",item:"WeatherComponent_item__36bXY",address:"WeatherComponent_address__16t_H",mainComponent:"WeatherComponent_mainComponent__mdLAj",temp:"WeatherComponent_temp__24mw7",bg:"WeatherComponent_bg__6dKOJ"}},82:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(0),r=a.n(i),c=a(16),s=a.n(c),o=(a(51),a(52),a(9)),u=a(102),d=a(101),l=a(25),m=a.n(l),h=new m.a({en:{locale:"en",loading:"Loading...",humidity:"Humidity",feelsLike:"Feels Like",wind:"Wind",important:"Important!",geolocationRequest:"Grant location permission in your device to continue",geolocationDisabled:"Geolocation is disabled in your device",north:"North",northEast:"Northeast",east:"East",southEast:"Southeast",south:"South",southWest:"Southwest",west:"West",northwest:"Northwest",station:"Station",noPrecipitations:"No precipitation expected",precipitations:function(e,t){return"Expected ".concat(e," at ").concat(t)}},es:{locale:"es",loading:"Cargando...",humidity:"Humedad",feelsLike:"Sensaci\xf3n t\xe9rmica",wind:"Viento",important:"\xa1Importante!",geolocationRequest:"Para continuar conceda permisos de ubicaci\xf3n.",geolocationDisabled:"La geolocalizaci\xf3n se encuentra deshabilitada en su dispositivo",north:"Norte",northEast:"Noreste",east:"Este",southEast:"Sudeste",south:"Sur",southWest:"Sudoeste",west:"Oeste",northwest:"Noroeste",station:"Estaci\xf3n",noPrecipitations:"No se esperan precipitaciones",precipitations:function(e,t){return"Se espera ".concat(e," a las ").concat(t)}}}),p=a(11),f=a(12),g=a.n(f),j=a(19),b=a(37),O=a(38),_=a(20),v=a.n(_),w=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,null,[{key:"getIpLocation",value:function(){var e=Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(this.IP_LOCATION).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeatherByCity",value:function(){var e=Object(j.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(this.WEATHER,{params:Object(p.a)(Object(p.a)({},this.baseParams),{},{q:"".concat(t,",").concat(a),lang:n})}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getWeatherByCoords",value:function(){var e=Object(j.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(this.WEATHER,{params:Object(p.a)(Object(p.a)({},this.baseParams),{},{lat:t,lon:a,lang:n})}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getForecastByCity",value:function(){var e=Object(j.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(this.FORECAST,{params:Object(p.a)(Object(p.a)({},this.baseParams),{},{q:"".concat(t,",").concat(a),lang:n})}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getForecastByCoords",value:function(){var e=Object(j.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(this.FORECAST,{params:Object(p.a)(Object(p.a)({},this.baseParams),{},{lat:t,lon:a,lang:n})}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}();w.OWM_API_ID="bb08096af050f2bd4c2b401249b14e27",w.URL="https://api.openweathermap.org/data/2.5",w.WEATHER=w.URL+"/weather",w.FORECAST=w.URL+"/forecast",w.IP_LOCATION="https://ipapi.co/json",w.baseParams={appid:w.OWM_API_ID,units:"metric"};var y=a(6),x=a.n(y),C=a.p+"static/media/cloudy-sky-min.d8516944.jpg",k=a.p+"static/media/drizzle-min.ad372d4a.jpg",N=a.p+"static/media/drizzle-night-min.45216be3.jpg",W=a.p+"static/media/fog-min.42e6f289.jpg",S=a.p+"static/media/rainy-day-min.f8c28a9f.jpg",L=a.p+"static/media/snow-min.2ba5aee5.jpg",E=a.p+"static/media/storm-min.c85d9d6c.jpg",T=a.p+"static/media/sunny-min.5651a5a0.jpg",D=a.p+"static/media/covered-min.3135c1a6.jpg",A=a.p+"static/media/clear-sky-night-min.7891b1f4.jpg",F=a.p+"static/media/cloudy-sky-night-min.3641cad9.jpg",I=a.p+"static/media/fog-night-min.8c04197d.jpg",R=a.p+"static/media/snow-night-min.661396c8.jpg",P=a.p+"static/media/covered-night-min.33216222.jpg",z=a.p+"static/media/rainy-night-min.ad153572.jpg",B=a.p+"static/media/cloudy-sky.dbc3ce7b.jpg",Y=a.p+"static/media/drizzle.9cdac81c.jpg",H=a.p+"static/media/drizzle-night.51696507.jpg",U=a.p+"static/media/fog.9a84ff24.jpg",q=a.p+"static/media/rainy-day.6b55c87c.jpg",G=a.p+"static/media/snow.8d5253ed.jpg",J=a.p+"static/media/storm.9648b46f.jpg",M=a.p+"static/media/sunny.f99420e2.jpg",K=a.p+"static/media/covered.3a9a56da.jpg",Q=a.p+"static/media/clear-sky-night.0e27e654.jpg",V=a.p+"static/media/cloudy-sky-night.8f63b02d.jpg",X=a.p+"static/media/fog-night.d917543e.jpg",Z=a.p+"static/media/snow-night.397b7550.jpg",$=a.p+"static/media/covered-night.d8a4bd0c.jpg",ee=a.p+"static/media/rainy-night.ec43470e.jpg",te=a(15),ae=a.n(te),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(e).toFixed(t)},ie=function(e){var t=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return"0"===t.charAt(0)?t.substr(1):t},re=function(e){var t=1e3*e.sys.sunrise,a=1e3*e.sys.sunset,n=(new Date).getTime();return n>t&&n<a},ce=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.join(" ")},se=a(4),oe=a.n(se),ue=(oe.a.shape({name:oe.a.string,weather:oe.a.array,main:oe.a.object,wind:oe.a.object}),oe.a.shape({list:oe.a.array}),function(e){var t=e.weather,a=r.a.useState({min:"",full:""}),i=Object(o.a)(a,2),c=i[0],s=i[1],u=r.a.useState(!1),d=Object(o.a)(u,2),l=d[0],m=d[1],h=r.a.useCallback((function(){return re(t)}),[t]),p=r.a.useCallback((function(){if(!t)return null;var e=t.weather[0].id,a=(""+e)[0],n=h();switch(a){case"2":return{full:J,min:E};case"3":return n?{full:Y,min:k}:{full:H,min:N};case"5":return n?{full:q,min:S}:{full:ee,min:z};case"6":return n?{full:G,min:L}:{full:Z,min:R};case"7":return n?{full:U,min:W}:{full:X,min:I};case"8":return 800===e||801===e?n?{full:M,min:T}:{full:Q,min:A}:802===e||803===e?n?{full:B,min:C}:{full:V,min:F}:n?{full:K,min:D}:{full:$,min:P};default:return{full:B,min:C}}}),[h,t]);return r.a.useEffect((function(){s(p())}),[p,t]),Object(n.jsxs)("div",{className:ae.a.container,children:[Object(n.jsx)("img",{className:ce(ae.a.image,ae.a.thumb,l?ae.a.hidden:""),src:c.min,alt:""}),Object(n.jsx)("img",{className:ce(ae.a.image,l?"":ae.a.hidden),src:c.full,alt:"",onLoad:function(){return m(!0)}})]})}),de=a(27),le=a.n(de),me=a(43),he=a(39),pe=a.n(he),fe=a(40),ge=a.n(fe),je=function(e){var t=e.isDayTime,a=void 0===t||t,i=e.weatherCode,c=Object(me.a)(e,["isDayTime","weatherCode"]),s=r.a.useState(null),u=Object(o.a)(s,2),d=u[0],l=u[1];return r.a.useEffect((function(){if(null!==i&&void 0!==i)switch(i.toString()[0]){case"2":case"5":case"3":l("RAIN");break;case"6":[612,613,615].includes(i)?l("SLEET"):l("SNOW");break;case"7":[771,781].includes(i)?l("WIND"):l("FOG");break;case"8":[800,801].includes(i)&&l(a?"CLEAR_DAY":"CLEAR_NIGHT"),[802,803].includes(i)&&l(a?"PARTLY_CLOUDY_DAY":"PARTLY_CLOUDY_NIGHT"),804===i&&l("CLOUDY");break;default:l("PARTLY_CLOUDY_DAY")}}),[i,a]),Object(n.jsx)("div",{className:ge.a.container,children:d&&Object(n.jsx)(pe.a,Object(p.a)({id:"canvas",icon:d},c))})},be=function(e){var t=e.weather,a=e.forecasts;return Object(n.jsx)("div",{className:le.a.todayForecast,children:a.map((function(e){return Object(n.jsx)(i.Fragment,{children:Object(n.jsxs)("div",{className:le.a.forecastContent,children:[Object(n.jsxs)("div",{style:{display:"flex",textAlign:"center"},children:[Object(n.jsx)(je,{isDayTime:re(t),weatherCode:e.weather[0].id,size:30,color:"white"}),Object(n.jsx)("span",{className:le.a.temp,children:Object(n.jsx)("strong",{children:ne(e.main.temp)+"\xb0"})})]}),Object(n.jsx)("div",{children:Object(n.jsx)("strong",{style:{fontSize:"9pt"},children:ie(1e3*e.dt)})})]})},e.dt)}))})},Oe=function(e){var t=e.weather,a=e.forecast,i=r.a.useState([]),c=Object(o.a)(i,2),s=c[0],u=c[1],d=r.a.useState(null),l=Object(o.a)(d,2),m=l[0],p=l[1];r.a.useEffect((function(){if(a){var e=a.list.filter((function(e){return 1e3*e.dt<function(){var e=new Date;e.setHours(e.getHours()+24);var t,a,n=new Date;return n.setHours(7,0,0,0),n.setDate(n.getDate()+1),(t=e)<=(a=n)?t:a}()}));u(e),p(e.find((function(e){return"Rain"===e.weather[0].main})))}}),[a]);var f,g;return Object(n.jsxs)("div",{className:x.a.container,children:[Object(n.jsx)("div",{className:x.a.bg,children:Object(n.jsx)(ue,{weather:t})}),Object(n.jsxs)("div",{className:ce(x.a.weatherComponent,x.a.mainComponent),children:[Object(n.jsx)("div",{className:x.a.date,children:(new Date).toLocaleString(h.locale,{weekday:"long",month:"long",day:"numeric"})}),Object(n.jsxs)("div",{className:x.a.currentWeather,children:[Object(n.jsx)("div",{className:ce(x.a.item,x.a.address),children:t.name}),Object(n.jsx)("div",{className:x.a.description,children:Object(n.jsx)("b",{children:t.weather[0].description})}),Object(n.jsxs)("div",{className:x.a.temp,children:[Object(n.jsx)(je,{isDayTime:re(t),weatherCode:t.weather[0].id,color:"white"}),ne(t.main.temp)+"\xb0C"]}),Object(n.jsxs)("div",{className:x.a.item,children:[h.feelsLike,": ",Object(n.jsx)("strong",{children:ne(t.main.feels_like)+"\xba"})]}),Object(n.jsxs)("div",{className:x.a.item,children:[h.humidity,": ",Object(n.jsx)("strong",{children:ne(t.main.humidity)+"%"})]}),Object(n.jsxs)("div",{className:x.a.item,children:[h.wind,": ",Object(n.jsx)("strong",{children:ne(t.wind.speed)+" km/h "+(g=t.wind.deg,[h.north,h.northEast,h.east,h.southEast,h.south,h.southWest,h.west,h.northwest,h.north][parseFloat(g%360/45).toFixed(0)])})]}),"Rain"!==t.weather[0].main&&Object(n.jsx)("div",{className:x.a.item,children:Object(n.jsx)("b",{children:m?(f=m,h.precipitations(f.weather[0].description,ie(1e3*m.dt))):h.noPrecipitations})})]}),Object(n.jsx)("div",{className:ce(x.a.hideScrollbar,x.a.forecastContainer),children:Object(n.jsx)(be,{weather:t,forecasts:s})})]})]})},_e=a(41),ve=a.n(_e),we=function(){var e=r.a.useState(null),t=Object(o.a)(e,2),a=t[0],i=t[1],c=r.a.useState(null),s=Object(o.a)(c,2),l=s[0],m=s[1],p=r.a.useState(null),f=Object(o.a)(p,2),g=f[0],j=f[1],b=r.a.useState(""),O=Object(o.a)(b,2),_=O[0],v=O[1],y="prompt",x="denied",C=r.a.useCallback((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){return t=e.coords.latitude,a=e.coords.longitude,w.getWeatherByCoords(t,a,h.getLanguage()).then((function(e){return i(e)})).catch((function(e){j(e.message),console.log(e)})),void w.getForecastByCoords(t,a,h.getLanguage()).then((function(e){m(e)})).catch((function(e){j(e.message),console.log(e)}));var t,a}))}),[]);r.a.useEffect((function(){navigator.permissions.query({name:"geolocation"}).then((function(e){v(e.state),e.onchange=function(){return v(e.state)}}))}),[]);var k=r.a.useCallback((function(){w.getIpLocation().then((function(e){W(e.city,e.country_code)})).catch((function(e){_!==y&&(j(h.geolocationDisabled),console.log(e))}))}),[_,y]),N=r.a.useCallback((function(){j(null),C(),_!==x&&_!==y&&navigator.geolocation||k()}),[C,k,_,x,y]);r.a.useEffect((function(){""!==_&&N()}),[N,_]);var W=function(e,t){w.getWeatherByCity(e,t,h.getLanguage()).then((function(e){return i(e)})).catch((function(e){j(e.message),console.log(e)}))},S=function(){N()};return r.a.useEffect((function(){return window.addEventListener("focus",S),function(){window.removeEventListener("focus",S)}})),Object(n.jsxs)("div",{className:ve.a.container,children:[g&&Object(n.jsx)(u.a,{severity:"error",children:g}),!a&&_===y&&Object(n.jsxs)(u.a,{severity:"info",children:[Object(n.jsx)("strong",{children:h.important})," ".concat(h.geolocationRequest)]}),a&&Object(n.jsx)(Oe,{weather:a,forecast:l}),!a&&_!==x&&Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center",position:"relative",top:"50%"},children:Object(n.jsx)(d.a,{})})]})},ye=new m.a({en:{lang:"en",title:"Open Weather"},es:{lang:"es",title:"Clima Libre"}});var xe=function(){return Object(n.jsx)("div",{className:"app",lang:ye.lang,children:Object(n.jsx)(we,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(81);s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(xe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[82,1,2]]]);
//# sourceMappingURL=main.4cb7ff47.chunk.js.map